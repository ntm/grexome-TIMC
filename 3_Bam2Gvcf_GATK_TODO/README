# 04/04/2018
# NTM

Setting up the cariant calling with GATK on krakenator.

I installed GATK in ~/Software/GATK/ , seems you call it with:
java -Xms512m -Xmx1g -jar /home/nthierry/Software/GATK/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar ...


However process_varcall.sh says in comments:

In reality it is called with:
process_varcall.sh $RESULTDIR/$currentSample/$currentSample.bam $RESULTDIR/$currentSample/$currentSample.raw.g.vcf.gz $RESULTDIR/$currentSample/logs/process_varcall.$logbasename.log $CONFIGFILE

So we have:
INPUTFILE=*.bam
OUTPUTFILE=*.g.vcf.gz
LOGFILE=$sample/logs/process_varcall*.log
CONFIGFILE= (passed from the hard-coded value in grexomes) == analysis_config_NTM.tsv

Then we grab from configfile:
PIPELINEBASE=$(grep "pipelinebase" $CONFIGFILE | awk '{print $2}')
JAVA=$(grep "javacmd" $CONFIGFILE | awk '{print $2}')
TEMPORARY_DIR=$(grep "temporary_dir" $CONFIGFILE | awk '{print $2}')
GATK=$(grep "GATKbase" $CONFIGFILE | awk '{print $2}')

# Define variable
RESSOURCEDIR=$PIPELINEBASE/ressources
RESSOURCE38DIR=$RESSOURCEDIR/GRCh38
REF=$RESSOURCE38DIR/grch38_essential.fa
DBSNP=$RESSOURCE38DIR/dbsnp.add_chr_20161122.vcf
TARGET=$RESSOURCE38DIR/refseq.cds.50bp.hg38.interval_list

finally call:
"$JAVA -Djava.io.tmpdir=$TEMPORARY_DIR -Xmx16g -jar $GATK/GenomeAnalysisTK.jar -T HaplotypeCaller -S STRICT -R $REF -I $INPUTFILE -L $TARGET -ERC BP_RESOLUTION -D $DBSNP -o $OUTPUTFILE -dt NONE -nct 8 -A StrandAlleleCountsBySample
